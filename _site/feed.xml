<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2020-10-10T12:39:12+02:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Open Source C++ developerâ€™s journal</title><subtitle>C++ developer's journal</subtitle><author><name>Ahmad Samir</name></author><entry><title type="html">Shell Script to Open Files related a git commit</title><link href="http://localhost:4000/2020/09/25/open-files-git-commit.html" rel="alternate" type="text/html" title="Shell Script to Open Files related a git commit" /><published>2020-09-25T00:00:00+02:00</published><updated>2020-09-25T00:00:00+02:00</updated><id>http://localhost:4000/2020/09/25/open-files-git-commit</id><content type="html" xml:base="http://localhost:4000/2020/09/25/open-files-git-commit.html">&lt;html&gt;
&lt;body&gt;
  &lt;p&gt;This is a small shell script that I use to open all files related to a commit in git; I find it quite useful when I want to resume working on a local branch.&lt;/p&gt;

  &lt;p&gt;This is useful if you're not using an IDE or you are working on multiple changes and switch between them.&lt;/p&gt;

  &lt;p&gt;Anyway, let's get to the script.&lt;/p&gt;

  &lt;div&gt;
    &lt;pre class=&quot;code&quot;&gt;
#!/bin/bash
gitPrefix=$(git rev-parse --show-toplevel)

__num=$(git diff --name-only | wc -l)

filter_open() {
    $1 | perl -p -e 's!.+!'$gitPrefix'/$&amp;!; s!.+(png|jpeg)$!!' | xargs kate -n &gt; /dev/null 2&gt;&amp;1 &amp;
}

if [ -z &quot;$1&quot; -a &quot;$__num&quot; -ge 1 ]; then
    filter_open &quot;git diff --name-only&quot;
else
    filter_open &quot;git diff HEAD^1 --name-only&quot;
fi
    &lt;/pre&gt;
  &lt;/div&gt;

  &lt;p&gt;&lt;code&gt;git rev-parse --show-toplevel&lt;/code&gt;: returns the absolute path to the top-level git repo directory&lt;/p&gt;
  &lt;p&gt;&lt;code&gt;git diff --name-only&lt;/code&gt;: returns the list of the files that are changed but not committed yet&lt;/p&gt;
  &lt;p&gt;&lt;code&gt;git diff HEAD^1 --name-only&lt;/code&gt;: returns the list of files that were changed (committed or not) since the commit before last in the repo&lt;/p&gt;
  &lt;p&gt;&lt;code&gt;perl -p -e 's!.+!'$gitPrefix'/$&amp;!; s!.+(png|jpeg)$!!'&lt;/code&gt;: since the git diff commands above return relative paths, I need to prepend $gitPrefix (the output of the &lt;code&gt;git rev-parse --show-toplevel&lt;/code&gt; command) to all those relative paths, that's what this perl command does; also it filters out all png/jpeg files (I don't want to edit images with a text editor... it doesn't work)&lt;/p&gt;

  &lt;p&gt;As you can see, I write hacky bash scripts, I am sure there are ways to make it more elegant, but it works, so.&lt;/p&gt;

  &lt;p&gt;I have two use cases here:
    &lt;li class=&quot;li-indent&quot;&gt;I started working in a branch, and haven't committed anything yet, so to reopen all the files I've changed in Kate, I use the script without any arguments&lt;/li&gt;
    &lt;li class=&quot;li-indent&quot;&gt;I started working on a branch, committed some stuff, then worked some more but haven't committed that work-in-progress yet, if I want to open all files (those that have been committed in the last commit and those that are still not committed), I call the script with &lt;i&gt;any&lt;/i&gt; argument e.g. &lt;code&gt;all&lt;/code&gt;.&lt;/li&gt;
  &lt;/p&gt;

  &lt;p&gt;Bonus point, if you save the script as e.g. &lt;code&gt;git-open-files&lt;/code&gt; somewhere in your PATH, you can call the script directly (after making it executable) from terminal or you can use it as a git command, i.e. &lt;code&gt;git open-files&lt;/code&gt; should work.&lt;/p&gt;

  &lt;p&gt;Happy hacking!&lt;/p&gt;

  &lt;p&gt;Credits: I had done some online research to get most of those commands (I find it easier to search for a &quot;concept&quot;, the after actually finding it, then read the relevant sections of the man pages; sometimes (well, usually) someone, somewhere, had already asked the same question :)), so thanks to all those online resources; e.g. I definitely recall finding the &lt;code&gt;git rev-parse --show-toplevel&lt;/code&gt; command in a stack{overflow,exchange} thread.&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;</content><author><name>Ahmad Samir</name></author><summary type="html">This is a small shell script that I use to open all files related to a commit in git; I find it quite useful when I want to resume working on a local branch.</summary></entry></feed>